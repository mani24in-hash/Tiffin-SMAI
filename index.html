<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sanatan Mandir Mandir Atlanta Inc -Tiffin Service Order Form </title>

<style>
  body { font-family: Arial, sans-serif; background: #f6f6f6; padding: 20px; }
  .container {
    max-width: 980px; background: #fff; margin: auto; padding: 25px;
    border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  h1 { text-align: center; color: #b45309; margin-top: 0; }
  .section-title {
    margin-top: 25px; color: #92400e;
    border-bottom: 1px solid #ddd; padding-bottom: 6px;
  }
  label { display: block; margin-top: 12px; font-weight: bold; }
  input[type="text"], input[type="email"], input[type="tel"], input[type="time"], textarea {
    width: 100%; padding: 10px; margin-top: 6px;
    border: 1px solid #ccc; border-radius: 6px; font-size: 14px;
  }

  .hint { font-size: 13px; color: #555; margin-top: 6px; }

  .day-picker {
    display: flex; flex-wrap: wrap; gap: 12px;
    margin-top: 8px; padding: 10px;
    border: 1px solid #ddd; border-radius: 8px; background: #fafafa;
  }
  .day-pill { font-weight: normal; margin: 0; }

  .day-menu {
    display: none;
    margin-top: 18px; padding: 14px;
    border: 1px solid #eee; border-radius: 10px;
  }

  .items-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  .items-table th, .items-table td {
    border-bottom: 1px solid #eee;
    padding: 10px 8px;
    vertical-align: middle;
  }
  .items-table th {
    text-align: left;
    color: #444;
    font-size: 14px;
  }
  .price {
    white-space: nowrap;
    font-weight: bold;
  }
  .qty {
    width: 90px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 14px;
  }

  .total-box {
    margin-top: 18px; padding: 14px;
    border: 1px solid #ddd; border-radius: 12px;
    background: #fafafa;
    display: flex; justify-content: space-between; align-items: center;
  }
  .total-amount { font-size: 22px; font-weight: bold; color: #065f46; }

  .error {
    display: none;
    margin-top: 12px;
    padding: 10px;
    border-radius: 8px;
    background: #fff7ed;
    border: 1px solid #fed7aa;
    color: #9a3412;
  }

  button {
    margin-top: 22px; width: 100%; padding: 12px;
    background: #b45309; color: #fff;
    border: none; font-size: 16px; cursor: pointer;
    border-radius: 8px;
  }
  button:hover { background: #92400e; }
</style>
</head>

<body>
<div class="container">
  <h1>Sanatan Mandir Tiffin Service Order</h1>

  <form id="orderForm" action="https://formspree.io/f/xeeeqjrn" method="POST">

    <!-- CUSTOMER DETAILS -->
    <label>Full Name *</label>
    <input type="text" name="name" required>

    <label>Phone *</label>
    <input type="tel" name="phone" required>

    <label>Email *</label>
    <input type="email" name="email" required>

    <label>Pickup Time *</label>
    <input type="time" name="pickup_time" required>

    <!-- DAY SELECTION -->
    <h2 class="section-title">Select Day(s) *</h2>
    <div class="hint">Select one or more days. Enter quantity next to each item. Quantity 0 means not selected.</div>

    <div class="day-picker">
      <label class="day-pill"><input type="checkbox" data-day="Monday" name="selected_days[]" value="Monday"> Monday</label>
      <label class="day-pill"><input type="checkbox" data-day="Tuesday" name="selected_days[]" value="Tuesday"> Tuesday</label>
      <label class="day-pill"><input type="checkbox" data-day="Wednesday" name="selected_days[]" value="Wednesday"> Wednesday</label>
      <label class="day-pill"><input type="checkbox" data-day="Thursday" name="selected_days[]" value="Thursday"> Thursday</label>
      <label class="day-pill"><input type="checkbox" data-day="Friday" name="selected_days[]" value="Friday"> Friday</label>
    </div>

    <div id="dayError" class="error">Please select at least one day.</div>
    <div id="qtyError" class="error">Please enter quantity (greater than 0) for at least one item.</div>

    <!-- TOTAL -->
    <div class="total-box" aria-live="polite">
      <div><strong>Total Amount</strong></div>
      <div class="total-amount" id="totalDisplay">$0.00</div>
    </div>
    <input type="hidden" name="total_amount" id="totalAmount" value="0.00">

    <!-- MONDAY -->
    <div class="day-menu" id="menu-Monday">
      <h2 class="section-title" style="margin-top:0;">Monday</h2>
      <table class="items-table">
        <thead>
          <tr><th>Item</th><th class="price">Unit Price</th><th>Qty</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>Full Tiffin â€“ Pav Bhaji, Tava Pulav &amp; Raita</td>
            <td class="price">$10.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Monday_Full_Tiffin_qty" data-price="10"></td>
          </tr>
          <tr>
            <td>Bhaji (per lb)</td>
            <td class="price">$7.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Monday_Bhaji_qty" data-price="7"></td>
          </tr>
          <tr>
            <td>Tava Pulav (per lb)</td>
            <td class="price">$7.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Monday_Tava_Pulav_qty" data-price="7"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- TUESDAY -->
    <div class="day-menu" id="menu-Tuesday">
      <h2 class="section-title" style="margin-top:0;">Tuesday</h2>
      <table class="items-table">
        <thead>
          <tr><th>Item</th><th class="price">Unit Price</th><th>Qty</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>Full Tiffin â€“ Chole, Puri, Kheer &amp; Jeera Rice</td>
            <td class="price">$10.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Tuesday_Full_Tiffin_qty" data-price="10"></td>
          </tr>
          <tr>
            <td>Chole</td>
            <td class="price">$7.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Tuesday_Chole_qty" data-price="7"></td>
          </tr>
          <tr>
            <td>Puri (per piece)</td>
            <td class="price">$0.50</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Tuesday_Puri_qty" data-price="0.5"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- WEDNESDAY -->
    <div class="day-menu" id="menu-Wednesday">
      <h2 class="section-title" style="margin-top:0;">Wednesday</h2>
      <table class="items-table">
        <thead>
          <tr><th>Item</th><th class="price">Unit Price</th><th>Qty</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>Full Tiffin â€“ Tadka Dal, Cabbage, Potato Shaak, Paratha &amp; Jeera Rice</td>
            <td class="price">$10.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Wednesday_Full_Tiffin_qty" data-price="10"></td>
          </tr>
          <tr>
            <td>Tadka Dal (per lb)</td>
            <td class="price">$7.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Wednesday_Tadka_Dal_qty" data-price="7"></td>
          </tr>
          <tr>
            <td>Potato Shaak (per lb)</td>
            <td class="price">$7.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Wednesday_Potato_Shaak_qty" data-price="7"></td>
          </tr>
          <tr>
            <td>Paratha (per piece)</td>
            <td class="price">$1.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Wednesday_Paratha_qty" data-price="1"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- THURSDAY -->
    <div class="day-menu" id="menu-Thursday">
      <h2 class="section-title" style="margin-top:0;">Thursday</h2>
      <table class="items-table">
        <thead>
          <tr><th>Item</th><th class="price">Unit Price</th><th>Qty</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>Full Tiffin â€“ Daal Dhokli, Sambharo, Masala Bhakri &amp; Rice</td>
            <td class="price">$10.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Thursday_Full_Tiffin_qty" data-price="10"></td>
          </tr>
          <tr>
            <td>Daal Dhokli</td>
            <td class="price">$7.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Thursday_Daal_Dhokli_qty" data-price="7"></td>
          </tr>
          <tr>
            <td>Masala Bhakri (per piece)</td>
            <td class="price">$1.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Thursday_Masala_Bhakri_qty" data-price="1"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- FRIDAY -->
    <div class="day-menu" id="menu-Friday">
      <h2 class="section-title" style="margin-top:0;">Friday</h2>
      <table class="items-table">
        <thead>
          <tr><th>Item</th><th class="price">Unit Price</th><th>Qty</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>Full Tiffin â€“ Idli, Sambhar &amp; Coconut Chutney</td>
            <td class="price">$10.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Friday_Full_Tiffin_qty" data-price="10"></td>
          </tr>
          <tr>
            <td>Sambhar</td>
            <td class="price">$7.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Friday_Sambhar_qty" data-price="7"></td>
          </tr>
          <tr>
            <td>Idli (per piece)</td>
            <td class="price">$1.00</td>
            <td><input class="qty qty-input" type="number" min="0" step="1" value="0"
                       name="Friday_Idli_qty" data-price="1"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- NOTES -->
    <h2 class="section-title">Additional Notes</h2>
    <textarea name="notes" rows="4" placeholder="Any special instructions..."></textarea>

    <!-- CUSTOMER CONFIRMATION EMAIL -->
    <input type="hidden" name="_autoresponse"
      value="Thank you for your Sanatan Mandir Tiffin Service order!

We have received your order successfully.

Pickup Time: {{pickup_time}}

ðŸ™ Sanatan Mandir Tiffin Service">

    <button type="submit">Submit Order</button>
  </form>
</div>

<script>
  const form = document.getElementById('orderForm');
  const dayCheckboxes = document.querySelectorAll('input[type="checkbox"][data-day]');
  const totalDisplay = document.getElementById('totalDisplay');
  const totalAmount = document.getElementById('totalAmount');

  const dayError = document.getElementById('dayError');
  const qtyError = document.getElementById('qtyError');

  function sanitizeQtyInput(input) {
    let v = parseInt(input.value || "0", 10);
    if (Number.isNaN(v) || v < 0) v = 0;
    input.value = v;
    return v;
  }

  function calculateTotal() {
    let total = 0;

    document.querySelectorAll('.day-menu').forEach(menu => {
      if (menu.style.display !== 'none') {
        menu.querySelectorAll('input.qty-input').forEach(qtyInput => {
          const qty = sanitizeQtyInput(qtyInput);
          const price = parseFloat(qtyInput.dataset.price || "0");
          if (qty > 0 && !Number.isNaN(price)) total += qty * price;
        });
      }
    });

    totalDisplay.textContent = `$${total.toFixed(2)}`;
    totalAmount.value = total.toFixed(2);
    return total;
  }

  function updateMenus() {
    dayCheckboxes.forEach(cb => {
      const day = cb.dataset.day;
      const menu = document.getElementById('menu-' + day);

      if (cb.checked) {
        menu.style.display = 'block';
      } else {
        menu.style.display = 'none';
        // Reset quantities for hidden day
        menu.querySelectorAll('input.qty-input').forEach(i => i.value = 0);
      }
    });

    dayError.style.display = 'none';
    qtyError.style.display = 'none';
    calculateTotal();
  }

  // Show/hide day menus
  dayCheckboxes.forEach(cb => cb.addEventListener('change', updateMenus));

  // Recalculate total when qty changes (works for any input)
  document.addEventListener('input', (e) => {
    if (e.target && e.target.classList && e.target.classList.contains('qty-input')) {
      sanitizeQtyInput(e.target);
      calculateTotal();
    }
  });

  // Validate on submit
  form.addEventListener('submit', (e) => {
    const anyDaySelected = Array.from(dayCheckboxes).some(cb => cb.checked);
    if (!anyDaySelected) {
      e.preventDefault();
      dayError.style.display = 'block';
      dayError.scrollIntoView({ behavior: 'smooth', block: 'center' });
      return;
    }

    const total = calculateTotal();
    if (total <= 0) {
      e.preventDefault();
      qtyError.style.display = 'block';
      qtyError.scrollIntoView({ behavior: 'smooth', block: 'center' });
      return;
    }
  });

  // Initial
  updateMenus();
</script>

</body>
</html>
